<!DOCTYPE html><html><head><title>Ecological Forcasting</title><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/main.css"><script src="/js/jquery-1.11.3.js" type="text/javascript"></script><script src="/js/bootstrap.min.js" type="text/javascript"></script></head><body><div class="page-header"><h1>Ecological Forcasting</h1></div><div id="map"></div><style>/* Always set the map height explicitly to define the size of the div
* element that contains the map. */

body {
  margin-left: 50px;
  margin-right: 50px;
}

/* Optional: Makes the sample page fill the window. */
#map {
  height: 70vh;
  width: 100%;
}
</style><script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBQgilx3e3-f0pgRfx-GCnNgzWllJlMhSs"></script><script>var male_deer = createNewIcon("008000")
var female_deer = createNewIcon("FE7569")
var male_dog = createNewIcon("0000FF")
var female_dog = createNewIcon("9370DB")
var map;
function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
    zoom: 7,
    center: {lat: 44.8012, lng: -68.7778},

  });
  
  //load JSON object 
  var dataset=$.ajax({
    url:'/data/cleaned.JSON',
    dataType: 'json'    
    })
   .done(function( data ) {

       console.log( "Sample of data:", data.slice( 0, 5 ) );

       for (var i = 0; i < data.length; i++) { 
         console.log(data[i].Lat)
         loadData(data[i])
       }

   });
}

function createNewIcon(color){
  var icon = new google.maps.MarkerImage(
            "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + color,
             new google.maps.Size(21, 34),
             new google.maps.Point(0,0),
             new google.maps.Point(10, 34)
            );
  
            return icon;
}

//load one JSON object
function loadData(data){

     var LatLng = {lat: data.Lat, lng: data.Lon};
    //determine marker color based on tick sex
    if (data.species === "Deer - Adult Female"){
     
      new google.maps.Marker({
                position: LatLng,
                map: map,
        icon: female_deer
      });
    } else if (data.species ==="Deer - Adult Male"){
      new google.maps.Marker({
                position: LatLng,
                map: map,
        icon: male_deer
      });
      
    } else if (data.species ==="Dog - Female"){
      new google.maps.Marker({
                position: LatLng,
                map: map,
        icon: female_dog
       });
    } else{
      new google.maps.Marker({
                position: LatLng,
                map: map,
        icon: male_dog
       });
    }       
}

google.maps.event.addDomListener(window, 'load', initMap); </script></body></html>