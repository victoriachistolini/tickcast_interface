<!DOCTYPE html><html><head><title>Ecological Forecasting</title><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/main.css"><script src="/js/jquery-1.11.3.js" type="text/javascript"></script><script src="/js/bootstrap.min.js" type="text/javascript"></script><script src="/js/date.js" type="text/javascript"></script></head><body><div class="page-header"><h1>Ecological Forecasting</h1></div><div class="row"><div class="col-md-9"><div id="map"></div></div><div class="col-md-3"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Map Key</h3></div><div class="panel-body"><div class="row"><div class="col-md-5"><div id="blueIcon"></div><br><div id="greenIcon"></div><br><div id="pinkIcon"></div><br><div id="purpleIcon"></div></div><div class="col-md-7"><div>Male Dog Tick</div><br><div>Male Deer TIck</div><br><div>Female Deer Tick</div><br><div>Female Dog Tick</div></div></div></div></div></div></div><style>body {
  margin-left: 50px;
  margin-right: 50px;
}

#map {
  height: 70vh;
  width: 100%;
}

#blueIcon {
width: 60px;
height: 20px;
background-color:#0000FF; 
}

#greenIcon {
width: 60px;
height: 20px;
background-color:#008000; 
} 

#pinkIcon {
width: 60px;
height: 20px;
background-color:#FE7569; 
} 

#purpleIcon {
width: 60px;
height: 20px;
background-color:#9370DB; 
} 
</style><script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBQgilx3e3-f0pgRfx-GCnNgzWllJlMhSs"></script><script>var male_deer = createNewIcon("008000")
var female_deer = createNewIcon("FE7569")
var male_dog = createNewIcon("0000FF")
var female_dog = createNewIcon("9370DB")
var map;
function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
    zoom: 7,
    center: {lat: 44.8012, lng: -68.7778},

  });
  
  //load JSON object 
  var dataset=$.ajax({
    url:"/data/cleaned.JSON",
    dataType: 'json'    
    })
   .done(function( data ) {
       for (var i = 0; i < data.length; i++) { 
         loadData(data[i])
       }
   });
}

function createNewIcon(color){
  var icon = new google.maps.MarkerImage(
            "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + color,
             new google.maps.Size(21, 34),
             new google.maps.Point(0,0),
             new google.maps.Point(10, 34)
            );
  
            return icon;
}

//load one JSON object
function loadData(data){
    console.log(data.Species)
     var LatLng = {lat: data.Lat, lng: data.Lon};
    //determine marker color based on tick sex
    if (data.Species === 1){
     
      new google.maps.Marker({
                position: LatLng,
                map: map,
        icon: female_deer
      });
    } else if (data.Species === 2){
      new google.maps.Marker({
                position: LatLng,
                map: map,
        icon: male_deer
      });
      
    } else if (data.Species === 4){
      new google.maps.Marker({
                position: LatLng,
                map: map,
        icon: female_dog
       });
    } else{
      new google.maps.Marker({
                position: LatLng,
                map: map,
        icon: male_dog
       });
    }       
}

google.maps.event.addDomListener(window, 'load', initMap); </script></body></html>